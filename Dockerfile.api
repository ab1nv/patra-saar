FROM node:22-slim

WORKDIR /app

COPY package.json turbo.json ./
COPY packages/shared/package.json ./packages/shared/
COPY apps/api/package.json ./apps/api/

RUN npm install

COPY packages/ ./packages/
COPY apps/api/ ./apps/api/

WORKDIR /app/apps/api
CMD ["npx", "wrangler", "dev", "--local", "--ip", "0.0.0.0"]
